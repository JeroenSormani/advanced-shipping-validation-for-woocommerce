jQuery(function($){$(document.body).on("click",".wpc-condition-add",function(){var o=$(this),n={action:wpc.action_prefix+"add_condition",group:$(this).attr("data-group"),nonce:wpc.nonce},t=o.parents(".wpc-conditions").find(".wpc-condition-group-"+n.group),i='<div class="wpc-condition-wrap loading"></div>';t.append(i).children(":last").block({message:null,overlayCSS:{background:"",opacity:.6}}),$.post(ajaxurl,n,function(o){t.find(" .wpc-condition-wrap.loading").first().replaceWith(function(){return $(o).hide().fadeIn("normal")})})}),$(document.body).on("click",".wpc-condition-delete",function(){1==$(this).closest(".wpc-condition-group").children(".wpc-condition-wrap").length?$(this).closest(".wpc-condition-group").fadeOut("normal",function(){$(this).next(".or-text").remove(),$(this).remove()}):$(this).closest(".wpc-condition-wrap").slideUp("fast",function(){$(this).remove()})}),$(document.body).on("click",".wpc-condition-group-add",function(){var o='<div class="wpc-condition-group loading"></div>',n=$(this).prev(".wpc-conditions"),t={action:wpc.action_prefix+"add_condition_group",group:parseInt($(this).prev(".wpc-conditions").find(".wpc-condition-group").length),nonce:wpc.nonce};n.append(o).children(":last").block({message:null,overlayCSS:{background:"",opacity:.6}}),$.post(ajaxurl,t,function(o){n.find(".wpc-condition-group.loading").first().replaceWith(function(){return $(o).hide().fadeIn("normal")})})}),$(document.body).on("change",".wpc-condition",function(){var o='<span style="width: 30%; border: 1px solid transparent; display: inline-block;">&nbsp;</span>',n={action:wpc.action_prefix+"update_condition_value",id:$(this).attr("data-id"),group:$(this).attr("data-group"),condition:$(this).val(),nonce:wpc.nonce},t=$(this).parents(".wpc-conditions").find(".wpc-condition-group-"+n.group),i=".wpc-value-wrap-"+n.id;t.find(i).html(o).block({message:null,overlayCSS:{background:"",opacity:.6}}),$.post(ajaxurl,n,function(o){t.find(i).replaceWith(o),$(document.body).trigger("wc-enhanced-select-init")});var c={action:wpc.action_prefix+"update_condition_description",condition:n.condition,nonce:wpc.nonce};$.post(ajaxurl,c,function(o){t.find(i+" ~ .wpc-description").replaceWith(o),$(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})})}),$(".wpc-conditions-post-table tbody").sortable({items:"tr",handle:".sort",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(o,n){n.item.css("background-color","#f6f6f6")},stop:function(o,n){n.item.removeAttr("style")},update:function(o,n){$table=$(this).closest("table"),$table.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={action:wpc.action_prefix+"save_post_order",form:$(this).closest("form").serialize(),nonce:wpc.nonce};$.post(ajaxurl,t,function(o){$(".wpc-conditions-post-table tbody tr:even").addClass("alternate"),$(".wpc-conditions-post-table tbody tr:odd").removeClass("alternate"),$table.unblock()})}}),$(document.body).on("blur",".wcasv_input_price[type=text]",function(){$(".wc_error_tip").fadeOut("100",function(){$(this).remove()})}).on("keyup change",".wcasv_input_price[type=text]",function(){var o=$(this).val(),n=new RegExp("[^-0-9%*\\"+woocommerce_admin.mon_decimal_point+"]+","gi"),t=o.replace(n,"");o!==t?($(this).val(t),$(document.body).triggerHandler("wc_add_error_tip",[$(this),"i18n_mon_decimal_error"])):$(document.body).triggerHandler("wc_remove_error_tip",[$(this),"i18n_mon_decimal_error"])})});