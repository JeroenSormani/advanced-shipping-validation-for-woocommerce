jQuery(function($){var o='<span class="loading-icon"><img src="images/wpspin_light.gif"/></span>';$("#wcasv_conditions").on("click",".condition-add",function(){var n={action:"wcasv_add_condition",group:$(this).attr("data-group"),nonce:wcasv.nonce};$(".condition-group-"+n.group).append(o).children(":last"),$.post(ajaxurl,n,function(o){$(".condition-group-"+n.group).append(o).children(":last").hide().fadeIn("normal"),$(".condition-group-"+n.group+" .loading-icon").children(":first").remove()})}),$("#wcasv_conditions").on("click",".condition-delete",function(){1==$(this).closest(".condition-group").children(".wcasv-condition-wrap").length?$(this).closest(".condition-group").fadeOut("normal",function(){$(this).remove()}):$(this).closest(".wcasv-condition-wrap").fadeOut("normal",function(){$(this).remove()})}),$("#wcasv_conditions").on("click",".condition-group-add",function(){$(".wcasv_conditions").append(o).children(":last");var n={action:"wcasv_add_condition_group",group:parseInt($(".condition-group").last().attr("data-group"))+1,nonce:wcasv.nonce};$.post(ajaxurl,n,function(o){$(".condition-group ~ .loading-icon").last().remove(),$(".wcasv_conditions").append(o).children(":last").hide().fadeIn("normal")})}),$("#wcasv_conditions").on("change",".wcasv-condition",function(){var n={action:"wcasv_update_condition_value",id:$(this).attr("data-id"),group:$(this).attr("data-group"),condition:$(this).val(),nonce:wcasv.nonce},t=".wcasv-value-wrap-"+n.id;$(t).html(o),$.post(ajaxurl,n,function(o){$(t).replaceWith(o)});var a={action:"wcasv_update_condition_description",condition:n.condition,nonce:wcasv.nonce};$.post(ajaxurl,a,function(o){$(t+" ~ .wcasv-description").replaceWith(o)})}),$(".wcasv-table tbody").sortable({items:"tr",handle:".sort",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(o,n){n.item.css("background-color","#f6f6f6")},stop:function(o,n){n.item.removeAttr("style")},update:function(o,n){$table=$(this).closest("table"),$table.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={action:"wcasv_save_fee_order",form:$(this).closest("form").serialize(),nonce:wcasv.nonce};$.post(ajaxurl,t,function(o){$(".wcasv-table tbody tr:even").addClass("alternate"),$(".wcasv-table tbody tr:odd").removeClass("alternate"),$table.unblock()})}}),$(".wcasv-tabbed-settings").on("click",".tabs a",function(){if(void 0!==$(this).data("target")){var o=$(this).parents(".tabs");o.find("li").removeClass("active"),$(this).parent("li").addClass("active");var n=o.parent().find(".panels");n.find(".panel").removeClass("active").hide(),n.find(".panel#"+$(this).data("target")).addClass("active").show()}}),$(".wcasv-tabbed-settings").on("click",".delete-repeater-row",function(){$(this).parents(".repeater-row").slideUp(function(){$(this).remove()})}),$(document.body).on("blur",".wcasv_input_price[type=text]",function(){$(".wc_error_tip").fadeOut("100",function(){$(this).remove()})}).on("keyup change",".wcasv_input_price[type=text]",function(){var o=$(this).val(),n=new RegExp("[^-0-9%*\\"+woocommerce_admin.mon_decimal_point+"]+","gi"),t=o.replace(n,"");o!==t?($(this).val(t),$(document.body).triggerHandler("wc_add_error_tip",[$(this),"i18n_mon_decimal_error"])):$(document.body).triggerHandler("wc_remove_error_tip",[$(this),"i18n_mon_decimal_error"])})});